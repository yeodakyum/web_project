<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>한양네컷</title>
    <link href="style.css" rel="stylesheet" />
  </head>
  <body>
    <header>
      <h1>한양네컷</h1>
    </header>
    <nav id="navbar">
      <ul>
        <li><a href="#" data-content="about">ABOUT US</a></li>
        <li><a href="#" data-content="upload">UPLOAD</a></li>
        <li><a href="#" data-content="filter">FILTER</a></li>
      </ul>
    </nav>
    <main style="overflow-y: scroll">
      <div id="about" class="content">
        <h1>당신의 일상을 예술작품으로 바꿔보세요.</h1>
        <br />
        <p>
          단 몇 번의 클릭으로 사진 업로드부터 프레임 색깔, 그리고 필터 적용까지
          모든 과정이 가능합니다.
        </p>
        <p>
          다양한 프레임 색깔은 여러분의 사진을 독특하게 만들어주며, 수많은
          필터는 감정과 분위기를 살려줍니다.
        </p>
        <p>
          이 모든 것은 여러분의 사진을 그저 사진이 아닌, 여러분의 이야기와
          감정을 담은 예술작품으로 만들어 드립니다.
        </p>
        <p>완성된 작품은 다운로드 받아 언제든지 감상하실 수 있습니다.</p>
        <br />
        <button class="page-button" data-next-content="upload">
          사진 업로드하기
        </button>
      </div>
      <div id="upload" class="content" style="display: none">
        <!-- <h2>색깔 테스트</h2>
        <p style="background-color: #807bb5">#807bb5</p>
        <p style="background-color: #364b91">#364b91</p>
        <p style="background-color: #3772a9">#3772a9</p>
        <p style="background-color: #76b9cb">#76b9cb</p>
        <p style="background-color: #aecfd8">#aecfd8</p> -->
        <button class="frame-button">프레임 변경하기</button>&nbsp;&nbsp;&nbsp;
        <div id="img_list">
          <div class="img_group">
            <input
              id="input1"
              type="file"
              onchange="change(this.id)"
              accept="image/*"
              hidden
            />
            <label for="input1"><img class="img" src="plus.png" /></label>
          </div>
          <div class="img_group">
            <input
              id="input2"
              type="file"
              onchange="change(this.id)"
              accept="image/*"
              hidden
            />
            <label for="input2"><img class="img" src="plus.png" /></label>
          </div>
          <div class="img_group">
            <input
              id="input3"
              type="file"
              onchange="change(this.id)"
              accept="image/*"
              hidden
            />
            <label for="input3"><img class="img" src="plus.png" /></label>
          </div>
          <div class="img_group">
            <input
              id="input4"
              type="file"
              onchange="change(this.id)"
              accept="image/*"
              hidden
            />
            <label for="input4"><img class="img" src="plus.png" /></label>
          </div>
        </div>
        &nbsp;&nbsp;&nbsp;
        <button class="page-button" data-next-content="filter">
          필터 적용하기
        </button>
      </div>
      <div id="filter" class="content" style="display: none">
        <div class="button-container">
          <button class="button" data-filter="brightness">Brightness</button>
          <button class="button" data-filter="contrast">Contrast</button>
          <button class="button" data-filter="saturate">Saturate</button>
          <button class="button" data-filter="sepia">Sepia</button>
          <button class="button" data-filter="grayscale">Grayscale</button>
          <button class="button" data-filter="blur">Blur</button>
        </div>
        <div class="image-container" id="filter-image-container">
          <!-- 업로드된 사진들이 여기에 추가됩니다 -->
        </div>
        <br />
        <button class="page-button">다운로드</button>
      </div>
    </main>
    <footer>
      한양대학교 정보시스템학과<br />
      권기태, 여다겸, 슈브로
    </footer>
  </body>

  <script>
    document
      .getElementById("navbar")
      .addEventListener("click", function (event) {
        if (event.target.getAttribute("data-content")) {
          event.preventDefault();

          let contents = document.getElementsByClassName("content");
          for (let i = 0; i < contents.length; i++) {
            contents[i].style.display = "none";
          }

          let contentId = event.target.getAttribute("data-content");
          document.getElementById(contentId).style.display = "block";
        }
      });

    document.querySelector("main").addEventListener("click", function (event) {
      if (event.target.getAttribute("data-next-content")) {
        let contents = document.getElementsByClassName("content");
        for (let i = 0; i < contents.length; i++) {
          contents[i].style.display = "none";
        }

        let contentId = event.target.getAttribute("data-next-content");
        document.getElementById(contentId).style.display = "block";
      }
    });

    function change(id) {
      let input = document.getElementById(id);
      let img = document
        .getElementById(id)
        .parentElement.getElementsByClassName("img")[0];
      if (input.files[0]) img.src = URL.createObjectURL(input.files[0]);
    }

    function color_change() {
      let color_input = document.getElementById("color").value;
      document.getElementById("img_list").style.backgroundColor = color_input;
    }

    document
      .querySelector(".frame-button")
      .addEventListener("click", function () {
        let colorInput = document.createElement("input");
        colorInput.type = "color";
        colorInput.id = "color";
        colorInput.onchange = color_change;
        colorInput.style.display = "none"; // input 태그를 숨기고, 프로그램적으로 클릭 이벤트를 발생시킵니다.
        document.body.appendChild(colorInput);
        colorInput.click();
      });

    document
      .querySelector('.page-button[data-next-content="filter"]')
      .addEventListener("click", function () {
        let imageContainer = document.getElementById("filter-image-container");
        let images = document
          .getElementById("img_list")
          .getElementsByClassName("img");

        // 기존에 추가된 이미지들을 모두 제거합니다
        while (imageContainer.firstChild) {
          imageContainer.firstChild.remove();
        }

        // 업로드된 이미지들을 필터 적용 페이지에 추가합니다
        for (let i = 0; i < images.length; i++) {
          if (images[i].src != "plus.png") {
            let img = document.createElement("img");
            img.src = images[i].src;
            imageContainer.appendChild(img);
          }
        }
      });

    // 필터 버튼 클릭 시 해당 필터를 이미지에 적용합니다
    let buttons = document.querySelectorAll(".button");
    buttons.forEach((button) => {
      button.addEventListener("click", function () {
        let filter = this.getAttribute("data-filter");
        let images = document
          .getElementById("filter-image-container")
          .getElementsByTagName("img");

        for (let i = 0; i < images.length; i++) {
          switch (filter) {
            case "brightness":
              images[i].style.filter = "brightness(1.5)";
              break;
            case "contrast":
              images[i].style.filter = "contrast(1.5)";
              break;
            case "saturate":
              images[i].style.filter = "saturate(2)";
              break;
            case "sepia":
              images[i].style.filter = "sepia(1)";
              break;
            case "grayscale":
              images[i].style.filter = "grayscale(1)";
              break;
            case "blur":
              images[i].style.filter = "blur(3px)";
              break;
          }
        }
      });
    });
  </script>
</html>
